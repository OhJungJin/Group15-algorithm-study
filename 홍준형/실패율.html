<!DOCTYPE html>
<html lang="en">
  <body>
    <script>
      function solution(N, stages) {
        const result = [];

        //1부터 ~ N까지의 스테이지 수
        for (let i = 1; i <= N; i++) {
          // 스테이지에 도달했으나 아직 클리어하지 못한 플레이어 수
          const reach = stages.filter((v) => v >= i).length;

          // 스테이지를 클리어한 플레이어 수
          const clear = stages.filter((v) => v > i).length;

          // 성공율 ( 클리어 수 / 도달 수 )
          const clearRatio = clear / reach;

          // 실패율 = 1 - 성공율
          const failRatio = 1 - clearRatio;

          //실패율과 스테이지 번호
          result.push([failRatio, i]);
        }

        // 실패율에 따른 오름차순 정렬
        // 및 map을 통해 1번째 인덱스(스테이지 번호)만 담긴 배열 생성
        return result.sort((a, b) => b[0] - a[0]).map((v) => v[1]);
      }
    </script>
  </body>
</html>
